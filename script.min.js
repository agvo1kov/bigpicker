let palette={currentColor:{percent:{colorCursor:{x:0,y:0},toneCursor:{x:0},alphaCursor:{x:100}},hsv:{h:0,s:0,v:100},rgb:{r:255,g:255,b:255},rgbPercentage:{r:100,g:100,b:100},hex:'fff',cmyk:{c:0,m:0,y:0,k:0},alpha:1},setColorFromPercent:function(r){r=this.validatePercent(r);r&&(r.hasOwnProperty('colorCursor')&&(this.currentColor.percent.colorCursor=r.colorCursor),r.hasOwnProperty('toneCursor')&&(this.currentColor.percent.toneCursor=r.toneCursor),this.currentColor.hsv=this.convertPercentToHsv(r),this.currentColor.rgb=this.convertHsvToRgb(this.currentColor.hsv),this.currentColor.rgbPercentage=this.convertRgbToRgbPercentage(this.currentColor.rgb),this.currentColor.hex=this.convertRgbToHex(this.currentColor.rgb),this.currentColor.cmyk=this.convertRgbToCmyk(this.currentColor.rgb))},setColorFromHsv:function(r){r=this.validateHsv(r);r&&(this.currentColor.hsv=r,this.currentColor.percent=this.convertHsvToPercent(r),this.currentColor.rgb=this.convertHsvToRgb(this.currentColor.hsv),this.currentColor.rgbPercentage=this.convertRgbToRgbPercentage(this.currentColor.rgb),this.currentColor.hex=this.convertRgbToHex(this.currentColor.rgb),this.currentColor.cmyk=this.convertRgbToCmyk(this.currentColor.rgb))},setColorFromRgb:function(r){r=this.validateRgb(r);r&&(this.currentColor.hsv=this.convertRgbToHsv(r),this.currentColor.percent=this.convertHsvToPercent(this.currentColor.hsv),this.currentColor.rgb=r,this.currentColor.rgbPercentage=this.convertRgbToRgbPercentage(this.currentColor.rgb),this.currentColor.hex=this.convertRgbToHex(this.currentColor.rgb),this.currentColor.cmyk=this.convertRgbToCmyk(this.currentColor.rgb))},setColorFromRgbPercentage:function(r){r=this.validateRgbPercentage(r);r&&(this.currentColor.rgbPercentage=r,this.currentColor.rgb=this.convertRgbPercentageToRgb(r),this.currentColor.hex=this.convertRgbToHex(this.currentColor.rgb),this.currentColor.hsv=this.convertRgbToHsv(this.currentColor.rgb),this.currentColor.percent=this.convertHsvToPercent(this.currentColor.hsv),this.currentColor.cmyk=this.convertRgbToCmyk(this.currentColor.rgb))},setColorFromHex:function(r){this.validateHex(r)&&(this.currentColor.hex=r,this.currentColor.rgb=this.convertHexToRgb(r),this.currentColor.rgbPercentage=this.convertRgbToRgbPercentage(this.currentColor.rgb),this.currentColor.hsv=this.convertRgbToHsv(this.currentColor.rgb),this.currentColor.percent=this.convertHsvToPercent(this.currentColor.hsv),this.currentColor.cmyk=this.convertRgbToCmyk(this.currentColor.rgb))},setColorFromCmyk:function(r){r=this.validateCmyk(r);r&&(this.currentColor.cmyk=r,this.currentColor.rgb=this.convertCmykToRgb(r),this.currentColor.rgbPercentage=this.convertRgbToRgbPercentage(this.currentColor.rgb),this.currentColor.hex=this.convertRgbToHex(this.currentColor.rgb),this.currentColor.hsv=this.convertRgbToHsv(this.currentColor.rgb),this.currentColor.percent=this.convertHsvToPercent(this.currentColor.hsv))},setAlpha:function(r){r=this.validateAlpha(r);r!==!1&&(this.currentColor.alpha=r/100,this.currentColor.percent.alphaCursor.x=r)},validatePercent:function(r){if(r.hasOwnProperty('colorCursor')){if(r.colorCursor.hasOwnProperty('x')&&r.colorCursor.hasOwnProperty('y')){if(!this.isInt(r.colorCursor.x)&&!this.isFloat(r.colorCursor.x)||!this.isInt(r.colorCursor.y)&&!this.isFloat(r.colorCursor.y)){return!1}r.colorCursor.x<0&&(r.colorCursor.x=0);r.colorCursor.y<0&&(r.colorCursor.y=0);r.colorCursor.x>100&&(r.colorCursor.x=100);r.colorCursor.y>100&&(r.colorCursor.y=100)}}else{if(!r.hasOwnProperty('toneCursor')){return!1}}if(r.hasOwnProperty('toneCursor')){if(r.toneCursor.hasOwnProperty('x')){if(!this.isInt(r.toneCursor.x)&&!this.isFloat(r.toneCursor.x)){return!1}r.toneCursor.x=parseInt(r.toneCursor.x);if(isNaN(r.toneCursor.x)){return!1}r.toneCursor.x<0&&(r.toneCursor.x=0);r.toneCursor.x>100&&(r.toneCursor.x=100)}}return r},validateHsv:function(r){if(r.hasOwnProperty('h')&&r.hasOwnProperty('s')&&r.hasOwnProperty('v')){r.h=parseInt(r.h);r.s=parseInt(r.s);r.v=parseInt(r.v);if((isNaN(r.h))||(isNaN(r.s))||(isNaN(r.v))){return!1}r.h<0&&(r.h=0);r.s<0&&(r.s=0);r.v<=0&&(r.v=0,r.s=0);r.h>=360&&(r.h=0);r.s>100&&(r.g=100);r.v>100&&(r.v=100);return r}return!1},validateRgb:function(r){if(r.hasOwnProperty('r')&&r.hasOwnProperty('g')&&r.hasOwnProperty('b')){r.r=parseInt(r.r);r.g=parseInt(r.g);r.b=parseInt(r.b);if((isNaN(r.r))||(isNaN(r.g))||(isNaN(r.b))){return!1}r.r<0&&(r.r=0);r.g<0&&(r.g=0);r.b<0&&(r.b=0);r.r>255&&(r.r=255);r.g>255&&(r.g=255);r.b>255&&(r.b=255);return r}return!1},validateRgbPercentage:function(r){if(r.hasOwnProperty('r')&&r.hasOwnProperty('g')&&r.hasOwnProperty('b')){r.r=parseInt(r.r);r.g=parseInt(r.g);r.b=parseInt(r.b);if((isNaN(r.r))||(isNaN(r.g))||(isNaN(r.b))){return!1}r.r<0&&(r.r=0);r.g<0&&(r.g=0);r.b<0&&(r.b=0);r.r>100&&(r.r=100);r.g>100&&(r.g=100);r.b>100&&(r.b=100);return r}return!1},validateHex:function(r){r=r.replace(/[^0-9a-fA-F]/g,'').substr(0,6);if(r.length<3){return!1}return r},validateCmyk:function(r){if(r.hasOwnProperty('c')&&r.hasOwnProperty('m')&&r.hasOwnProperty('y')&&r.hasOwnProperty('k')){if(!this.isInt(r.c)&&!this.isFloat(r.c)||!this.isInt(r.m)&&!this.isFloat(r.m)||!this.isInt(r.y)&&!this.isFloat(r.y)||!this.isInt(r.k)&&!this.isFloat(r.k)){return!1}r.c<0&&(r.c=0);r.m<0&&(r.m=0);r.y<0&&(r.y=0);r.k<0&&(r.k=0);r.c>100&&(r.c=100);r.m>100&&(r.m=100);r.y>100&&(r.y=100);r.k>100&&(r.k=100);return r}return!1},validateAlpha:function(r){if(this.isInt(r)&&this.isFloat(r)){return!1}r<0&&(r=0);r>100&&(r=100);return r},convertPercentToHsv:function(r){r.hasOwnProperty('toneCursor')||(r.toneCursor=this.currentColor.percent.toneCursor);r.hasOwnProperty('colorCursor')||(r.colorCursor=this.currentColor.percent.colorCursor);let e={h:360-r.toneCursor.x*3.6,s:r.colorCursor.x,v:100-r.colorCursor.y};e.h===360&&(e.h=0);e.v===0&&(e.s=0);return e},convertHsvToPercent:function(r){let e=(360-r.h)/3.6;e===100&&(e=0);return{toneCursor:{x:e},colorCursor:{x:r.s,y:100-r.v},alphaCursor:this.currentColor.percent.alphaCursor}},convertRgbToHex:function(r){let e={r:Math.round(r.r).toString(16),g:Math.round(r.g).toString(16),b:Math.round(r.b).toString(16)};e.r.length<2&&(e.r='0'+e.r);e.g.length<2&&(e.g='0'+e.g);e.b.length<2&&(e.b='0'+e.b);e.r[0]===e.r[1]&&e.g[0]===e.g[1]&&e.b[0]===e.b[1]&&(e.r=e.r[0],e.g=e.g[0],e.b=e.b[0]);return e.r+e.g+e.b},convertHexToRgb:function(r){if(r.length===3){return{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16)}}else if(r.length===6){return{r:parseInt(r[0]+r[1],16),g:parseInt(r[2]+r[3],16),b:parseInt(r[4]+r[5],16)}}},convertRgbToRgbPercentage:function(r){return{r:r.r*100/255,g:r.g*100/255,b:r.b*100/255}},convertRgbPercentageToRgb:function(r){return{r:r.r*255/100,g:r.g*255/100,b:r.b*255/100}},convertRgbToHsv:function(r){let e=r.r/255,t=r.g/255,o=r.b/255,n=Math.max(e,t,o),c=Math.min(e,t,o),u=this.currentColor.hsv;(e===t&&t===o)||(n===c?(u.h=0):n===e&&t>=o?(u.h=60*((t-o)/(n-c))):n===e&&t<o?(u.h=60*((t-o)/(n-c))+360):n===t?(u.h=60*((o-e)/(n-c))+120):n===o&&(u.h=60*((e-t)/(n-c))+240));n===0?(u.s=0):(u.s=(1-c/n)*100);u.v=n*100;return u},convertHsvToRgb:function(r){let e={r:0,g:0,b:0},t=Math.round(r.h),o=Math.round(r.s),n=Math.round(r.v),c=Math.floor(t/60)%6,u=(100-o)*n/100,l=(n-u)*(t%60/60),s=u+l,a=n-l;switch(c){case 0:e={r:n,g:s,b:u};break;case 1:e={r:a,g:n,b:u};break;case 2:e={r:u,g:n,b:s};break;case 3:e={r:u,g:a,b:n};break;case 4:e={r:s,g:u,b:n};break;case 5:e={r:n,g:u,b:a};break}e.r*=2.55;e.g*=2.55;e.b*=2.55;return e},convertRgbToCmyk:function(r){let e=parseInt((''+r.r).replace(/\s/g,''),10),t=parseInt((''+r.g).replace(/\s/g,''),10),o=parseInt((''+r.b).replace(/\s/g,''),10);if(e===0&&t===0&&o===0){return{c:0,m:0,y:0,k:100}}let n=1-e/255,c=1-t/255,u=1-o/255,l,s=Math.min(n,Math.min(c,u));n=(n-s)/(1-s);c=(c-s)/(1-s);u=(u-s)/(1-s);l=s;let a={c:0,m:0,y:0,k:0};a.c=Math.round(n*100);a.m=Math.round(c*100);a.y=Math.round(u*100);a.k=Math.round(l*100);return a},convertCmykToRgb:function(r){let e=r.c/100,t=r.m/100,o=r.y/100,n=r.k/100;e*=1-n;t*=1-n;o*=1-n;return{r:Math.round((1-e-n)*255),g:Math.round((1-t-n)*255),b:Math.round((1-o-n)*255)}},isInt:function(r){return Number(r)===r&&r%1===0},isFloat:function(r){return Number(r)===r&&r%1!==0}},touchIntent=!1,wrapper=document.getElementById('wrapper'),colorPicker=document.getElementById('colorPicker'),tonePicker=document.getElementById('tonePicker'),alphaPicker=document.getElementById('alphaPicker'),toneColor=document.getElementById('toneColor'),transparentGradientColorStart=document.getElementById('transparentGradientColorStart'),transparentGradientColorEnd=document.getElementById('transparentGradientColorEnd'),rectColor=document.getElementById('rectColor'),hexInput=document.getElementById('hexInput'),rgbInput=document.getElementById('rgbInput'),rgbPercentageInput=document.getElementById('rgbPercentageInput'),hsvInput=document.getElementById('hsvInput'),cmykInput=document.getElementById('cmykInput'),exampleText=document.getElementById('exampleText'),colorPickerCursor=document.getElementById('colorPickerCursor');tonePickerCursor=document.getElementById('tonePickerCursor'),
	tonePickerCursorVertical=document.getElementById('tonePickerCursorVertical'),
	tonePickerCursorHorizontal=document.getElementById('tonePickerCursorHorizontal'),
	alphaPickerCursor=document.getElementById('alphaPickerCursor'),

	cursors=document.getElementsByClassName('cursor'),
	mobileColorModelSelect=document.getElementById('mobileColorModelSelect'),
	mobileBackground=document.getElementById('mobileBackground');let ui={selectedInput:hexInput,deviceIsSmartphoneOrTablet:!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)),exampleText:'Example text for <b>demonstration</b>',url:window.location.pathname,portraitOrientation:window.matchMedia('(orientation: portrait)').matches};function updateUI(r){rectColor.setAttribute('fill','rgba('+Math.round(palette.currentColor.rgb.r)+', '+Math.round(palette.currentColor.rgb.g)+', '+Math.round(palette.currentColor.rgb.b)+', '+palette.currentColor.alpha+')');let e=palette.convertHsvToRgb({h:palette.currentColor.hsv.h,s:100,v:100});toneColor.setAttribute('fill','rgb('+Math.round(e.r)+', '+Math.round(e.g)+', '+Math.round(e.b)+')');transparentGradientColorStart.setAttribute('stop-color','rgb('+Math.round(palette.currentColor.rgb.r)+', '+Math.round(palette.currentColor.rgb.g)+', '+Math.round(palette.currentColor.rgb.b)+')');transparentGradientColorEnd.setAttribute('stop-color','rgb('+Math.round(palette.currentColor.rgb.r)+', '+Math.round(palette.currentColor.rgb.g)+', '+Math.round(palette.currentColor.rgb.b)+')');let t=Math.round(palette.currentColor.rgb.r)+', '+Math.round(palette.currentColor.rgb.g)+', '+Math.round(palette.currentColor.rgb.b),o=Math.round(palette.currentColor.rgbPercentage.r)/100+', '+Math.round(palette.currentColor.rgbPercentage.g)/100+', '+Math.round(palette.currentColor.rgbPercentage.b)/100,n=Math.round(palette.currentColor.hsv.h)+', '+Math.round(palette.currentColor.hsv.s)+', '+Math.round(palette.currentColor.hsv.v),c=Math.round(palette.currentColor.cmyk.c)+', '+Math.round(palette.currentColor.cmyk.m)+', '+Math.round(palette.currentColor.cmyk.y)+', '+Math.round(palette.currentColor.cmyk.k);if(palette.currentColor.alpha!==1){let r=Math.round(palette.currentColor.alpha*100)/100;t+=', '+r;o+=', '+r;n+=', '+r;c+=', '+r}hexInput!==r&&(hexInput.value=palette.currentColor.hex);rgbInput!==r&&(rgbInput.value=t);rgbPercentageInput!==r&&(rgbPercentageInput.value=o);hsvInput!==r&&(hsvInput.value=n);cmykInput!==r&&(cmykInput.value=c);exampleText.innerHTML=ui.exampleText;exampleText.style.color='rgba('+Math.round(palette.currentColor.rgb.r)+', '+Math.round(palette.currentColor.rgb.g)+', '+Math.round(palette.currentColor.rgb.b)+', '+palette.currentColor.alpha+')';colorPickerCursor.setAttribute('transform','translate('+palette.currentColor.percent.colorCursor.x*colorPicker.clientWidth/100+', '+palette.currentColor.percent.colorCursor.y*colorPicker.clientHeight/100+')');palette.currentColor.hsv.s<35&&palette.currentColor.hsv.v>65||palette.currentColor.hsv.v>80&&palette.currentColor.hsv.h>43&&palette.currentColor.hsv.h<190?colorPickerCursor.setAttribute('stroke','#404040'):colorPickerCursor.setAttribute('stroke','#fff');ui.portraitOrientation?tonePickerCursor.setAttribute('transform','translate('+palette.currentColor.percent.toneCursor.x*tonePicker.clientWidth/100+', 0)'):tonePickerCursor.setAttribute('transform','translate(0, '+palette.currentColor.percent.toneCursor.x*tonePicker.clientHeight/100+')');palette.currentColor.hsv.h>43&&palette.currentColor.hsv.h<190?(tonePickerCursorVertical.setAttribute('stroke','#404040'),tonePickerCursorHorizontal.setAttribute('stroke','#404040')):(tonePickerCursorVertical.setAttribute('stroke','#f5f5f5'),tonePickerCursorHorizontal.setAttribute('stroke','#f5f5f5'));alphaPickerCursor.setAttribute('transform','translate('+(palette.currentColor.percent.alphaCursor.x*alphaPicker.clientWidth/100-4)+', 0)');palette.currentColor.hsv.s<50&&palette.currentColor.hsv.v>50||palette.currentColor.percent.alphaCursor.x<50||palette.currentColor.hsv.v>80&&palette.currentColor.hsv.h>43&&palette.currentColor.hsv.h<190?alphaPickerCursor.setAttribute('stroke','#404040'):alphaPickerCursor.setAttribute('stroke','#f5f5f5');mobileBackground.style.fill='#'+palette.currentColor.hex;mobileBackground.style.opacity=palette.currentColor.alpha}function colorChoosingActionStart(r,e){wrapper.classList.add('non-select');colorPickerCursor.classList.add('scale-out-anim');palette.setColorFromPercent({colorCursor:{x:(r-colorPicker.offsetLeft)*100/colorPicker.clientWidth,y:(e-colorPicker.offsetTop)*100/colorPicker.clientHeight}});touchIntent='color';updateUI()}colorPicker.addEventListener('mousedown',function(r){colorChoosingActionStart(r.pageX,r.pageY)});colorPicker.addEventListener('touchstart',function(r){if(r.targetTouches.length>0){let e=r.targetTouches[0];colorChoosingActionStart(e.pageX,e.pageY)}});function toneChoosingActionStart(r){wrapper.classList.add('non-select');tonePickerCursor.classList.add('scale-out-anim');let e=(r.y-tonePicker.offsetTop)*100/tonePicker.clientHeight;ui.portraitOrientation&&(e=(r.x-tonePicker.offsetLeft)*100/tonePicker.clientWidth);palette.setColorFromPercent({toneCursor:{x:e}});touchIntent='tone';updateUI()}tonePicker.addEventListener('mousedown',function(r){toneChoosingActionStart({x:r.pageX,y:r.pageY})});tonePicker.addEventListener('touchstart',function(r){if(r.targetTouches.length>0){let e=r.targetTouches[0];toneChoosingActionStart({x:e.pageX,y:e.pageY})}});function alphaChoosingActionStart(r){wrapper.classList.add('non-select');alphaPickerCursor.classList.add('scale-out-anim');palette.setAlpha((r-alphaPicker.offsetLeft)*100/alphaPicker.clientWidth);touchIntent='alpha';updateUI()}alphaPicker.addEventListener('mousedown',function(r){alphaChoosingActionStart(r.pageX)});alphaPicker.addEventListener('touchstart',function(r){if(r.targetTouches.length>0){let e=r.targetTouches[0];alphaChoosingActionStart(e.pageX)}});document.addEventListener('touchmove',function(r){if(r.targetTouches.length>0){let e=r.targetTouches[0];actionsHandler({x:e.pageX,y:e.pageY})}});document.addEventListener('mousemove',function(r){actionsHandler({x:r.pageX,y:r.pageY})});function actionsHandler(r){switch(touchIntent){case 'color':palette.setColorFromPercent({colorCursor:{x:(r.x-colorPicker.offsetLeft)*100/colorPicker.clientWidth,y:(r.y-colorPicker.offsetTop)*100/colorPicker.clientHeight}});updateUI();break;case 'tone':let e=(r.y-tonePicker.offsetTop)*100/tonePicker.clientHeight;ui.portraitOrientation&&(e=(r.x-tonePicker.offsetLeft)*100/tonePicker.clientWidth);palette.setColorFromPercent({toneCursor:{x:e}});updateUI();break;case 'alpha':palette.setAlpha((r.x-alphaPicker.offsetLeft)*100/alphaPicker.clientWidth);updateUI();break}}document.addEventListener('mouseup',function(){actionsEnd()});document.addEventListener('touchend',function(){actionsEnd()});function changeUrl(){let r='';palette.currentColor.alpha!==1&&(r='&alpha='+Math.round(palette.currentColor.alpha*100)/100);window.history.pushState(null,'#'+palette.currentColor.hex,ui.url+'?hex='+palette.currentColor.hex+r);localStorage.setItem('currentHue',palette.currentColor.hsv.h);localStorage.setItem('currentHex',palette.currentColor.hex);localStorage.setItem('currentPercent',JSON.stringify(palette.currentColor.percent))}function actionsEnd(){(touchIntent==='color'||touchIntent==='tone'||touchIntent==='alpha')&&(ui.deviceIsSmartphoneOrTablet&&ui.selectedInput.select(),tonePickerCursor.classList.remove('scale-out-anim'),colorPickerCursor.classList.remove('scale-out-anim'),alphaPickerCursor.classList.remove('scale-out-anim'),changeUrl());touchIntent=!1;wrapper.classList.remove('non-select')}hexInput.addEventListener('input',function(){let r=hexInput.value.replace(/[^0-9a-fA-F]/g,'').substr(0,6);palette.setColorFromHex(r);updateUI(hexInput);changeUrl()});rgbInput.addEventListener('input',function(){let r=rgbInput.value.replace(',',' ').replace(/[^0-9. ]/g,'').replace(/ +/g,' ').trim();console.log(r);let e={r:palette.currentColor.rgb.r,g:palette.currentColor.rgb.g,b:palette.currentColor.rgb.b},t=r.split(' ');t.length>=3&&(e.r=t[0]*1,e.g=t[1]*1,e.b=t[2]*1,t.length>3?palette.setAlpha(t[3]*100):palette.setAlpha(100),palette.setColorFromRgb(e));updateUI(rgbInput);changeUrl()});rgbPercentageInput.addEventListener('input',function(){let r=rgbPercentageInput.value.replace(',',' ').replace(/[^0-9. ]/g,'').replace(/ +/g,' ').trim(),e={r:palette.currentColor.rgbPercentage.r,g:palette.currentColor.rgbPercentage.g,b:palette.currentColor.rgbPercentage.b},t=r.split(' ');t.length>=3&&(e.r=t[0]*100,e.g=t[1]*100,e.b=t[2]*100,t.length>3?palette.setAlpha(t[3]*100):palette.setAlpha(100),palette.setColorFromRgbPercentage(e));updateUI(rgbPercentageInput);changeUrl()});hsvInput.addEventListener('input',function(){let r=hsvInput.value.replace(',',' ').replace(/ +/g,' ').replace(/ +/g,' ').trim(),e={h:palette.currentColor.hsv.h,s:palette.currentColor.hsv.s,v:palette.currentColor.hsv.v},t=r.split(' ');t.length>=3&&(e.h=t[0]*1,e.s=t[1]*1,e.v=t[2]*1,t.length>3?palette.setAlpha(t[3]*100):palette.setAlpha(100),palette.setColorFromHsv(e));updateUI(hsvInput);changeUrl()});cmykInput.addEventListener('input',function(){let r=cmykInput.value.replace(',',' ').replace(/[^0-9., ]/g,'').replace(/ +/g,' ').trim(),e={c:palette.currentColor.hsv.c,m:palette.currentColor.hsv.m,y:palette.currentColor.hsv.y,k:palette.currentColor.hsv.k},t=r.split(' ');t.length>=4&&(e.c=t[0]*1,e.m=t[1]*1,e.y=t[2]*1,e.k=t[3]*1,t.length>4?palette.setAlpha(t[4]*100):palette.setAlpha(100),palette.setColorFromCmyk(e));updateUI(cmykInput);changeUrl()});function toSelectInput(r){ui.selectedInput.classList.remove('selected');ui.selectedInput=r;r.classList.add('selected');localStorage.setItem('selectedInputId',r.id);mobileColorModelSelect.classList.remove('percentage');switch(r){case hexInput:mobileColorModelSelect.value='HEX';break;case rgbInput:mobileColorModelSelect.value='RGB';break;case rgbPercentageInput:mobileColorModelSelect.value='RGB Percentage';mobileColorModelSelect.classList.add('percentage');break;case hsvInput:mobileColorModelSelect.value='HSV';break;case cmykInput:mobileColorModelSelect.value='CMYK';break;default:mobileColorModelSelect.value=':)'}}if(localStorage.getItem('selectedInputId')!==null){let r=document.getElementById(localStorage.getItem('selectedInputId'));r!==null&&toSelectInput(r)}hsvInput.addEventListener('focus',function(){toSelectInput(this)});hexInput.addEventListener('focus',function(){toSelectInput(this)});rgbInput.addEventListener('focus',function(){toSelectInput(this)});rgbPercentageInput.addEventListener('focus',function(){toSelectInput(this)});cmykInput.addEventListener('focus',function(){toSelectInput(this)});function recoveryColorFromUrl(){let r=getJsonFromUrl();r.hasOwnProperty('hex')&&(palette.setColorFromHex(r.hex),palette.currentColor.hsv.s===0&&(palette.currentColor.hsv.h=localStorage.getItem('currentHue'),palette.setColorFromHsv(palette.currentColor.hsv)),r.hex===localStorage.getItem('currentHex')&&(palette.currentColor.percent=JSON.parse(localStorage.getItem('currentPercent'))));r.hasOwnProperty('alpha')&&palette.setAlpha(r.alpha*100);updateUI();return!0}recoveryColorFromUrl()&&Array.prototype.filter.call(cursors,function(r){r.style.opacity='1';r.style.transition='all 0.1s linear 0s'});function getJsonFromUrl(){let r=location.search.substr(1),e=[];r.split('&').forEach(function(r){let t=r.split('=');e[t[0]]=decodeURIComponent(t[1])});return e}window.addEventListener('resize',function(){ui.portraitOrientation=window.matchMedia('(orientation: portrait)').matches;updateUI()});mobileColorModelSelect.addEventListener('input',function(){switch(this.value){case 'HEX':toSelectInput(hexInput);break;case 'RGB':toSelectInput(rgbInput);break;case 'RGB Percentage':toSelectInput(rgbPercentageInput);break;case 'HSV':toSelectInput(hsvInput);break;case 'CMYK':toSelectInput(cmykInput);break;default:toSelectInput(hexInput)}});turnNightMode=()=>{document.body.style.transitionDuration="0s",nightModeSwitcher.classList.add('night'),document.body.classList.add('night'),document.body.style.transitionDuration="0.1s"};turnLightMode=()=>{document.body.style.transitionDuration="0s",nightModeSwitcher.classList.remove('night'),document.body.classList.remove('night'),document.body.style.transitionDuration="0.1s"};let nightModeSwitcher=document.getElementById('night-mode-switcher');function nightModeSwitch(){nightModeSwitcher.classList.contains('night')?(turnLightMode(),localStorage.setItem('night-mode','off')):(turnNightMode(),localStorage.setItem('night-mode','on'))}getDefaultTheme=()=>{let r=localStorage.getItem('journalbook_theme');if(r!==null){return r}if(window.matchMedia('(prefers-color-scheme: dark)').matches){console.log('Dark theme enabled.');return'dark'}console.log('Bright theme enabled.');return''};autoThemeApply=()=>{let r=getDefaultTheme();r!==localStorage.getItem('user-desktop-theme')?(localStorage.setItem('user-desktop-theme',r),r==='dark'?(localStorage.setItem('night-mode','on'),turnNightMode()):(localStorage.setItem('night-mode','off'),turnLightMode())):localStorage.getItem('night-mode')==='on'&&(localStorage.setItem('night-mode','on'),turnNightMode())};autoThemeApply();window.onfocus=autoThemeApply
