const palette={currentColor:{percent:{colorCursor:{x:0,y:0},toneCursor:{x:0},alphaCursor:{x:100}},hsv:{h:0,s:0,v:100},rgb:{r:255,g:255,b:255},rgbPercentage:{r:100,g:100,b:100},hex:"fff",cmyk:{c:0,m:0,y:0,k:0},alpha:1},setColorFromPercent:function(t){(t=this.validatePercent(t))&&(t.hasOwnProperty("colorCursor")&&(this.currentColor.percent.colorCursor=t.colorCursor),t.hasOwnProperty("toneCursor")&&(this.currentColor.percent.toneCursor=t.toneCursor),this.currentColor.hsv=this.convertPercentToHsv(t),this.currentColor.rgb=this.convertHsvToRgb(this.currentColor.hsv),this.currentColor.rgbPercentage=this.convertRgbToRgbPercentage(this.currentColor.rgb),this.currentColor.hex=this.convertRgbToHex(this.currentColor.rgb),this.currentColor.cmyk=this.convertRgbToCmyk(this.currentColor.rgb))},setColorFromHsv:function(t){(t=this.validateHsv(t))&&(this.currentColor.hsv=t,this.currentColor.percent=this.convertHsvToPercent(t),this.currentColor.rgb=this.convertHsvToRgb(this.currentColor.hsv),this.currentColor.rgbPercentage=this.convertRgbToRgbPercentage(this.currentColor.rgb),this.currentColor.hex=this.convertRgbToHex(this.currentColor.rgb),this.currentColor.cmyk=this.convertRgbToCmyk(this.currentColor.rgb))},setColorFromRgb:function(t){(t=this.validateRgb(t))&&(this.currentColor.hsv=this.convertRgbToHsv(t),this.currentColor.percent=this.convertHsvToPercent(this.currentColor.hsv),this.currentColor.rgb=t,this.currentColor.rgbPercentage=this.convertRgbToRgbPercentage(this.currentColor.rgb),this.currentColor.hex=this.convertRgbToHex(this.currentColor.rgb),this.currentColor.cmyk=this.convertRgbToCmyk(this.currentColor.rgb))},setColorFromRgbPercentage:function(t){(t=this.validateRgbPercentage(t))&&(this.currentColor.rgbPercentage=t,this.currentColor.rgb=this.convertRgbPercentageToRgb(t),this.currentColor.hex=this.convertRgbToHex(this.currentColor.rgb),this.currentColor.hsv=this.convertRgbToHsv(this.currentColor.rgb),this.currentColor.percent=this.convertHsvToPercent(this.currentColor.hsv),this.currentColor.cmyk=this.convertRgbToCmyk(this.currentColor.rgb))},setColorFromHex:function(t){this.validateHex(t)&&(this.currentColor.hex=t,this.currentColor.rgb=this.convertHexToRgb(t),this.currentColor.rgbPercentage=this.convertRgbToRgbPercentage(this.currentColor.rgb),this.currentColor.hsv=this.convertRgbToHsv(this.currentColor.rgb),this.currentColor.percent=this.convertHsvToPercent(this.currentColor.hsv),this.currentColor.cmyk=this.convertRgbToCmyk(this.currentColor.rgb))},setColorFromCmyk:function(t){(t=this.validateCmyk(t))&&(this.currentColor.cmyk=t,this.currentColor.rgb=this.convertCmykToRgb(t),this.currentColor.rgbPercentage=this.convertRgbToRgbPercentage(this.currentColor.rgb),this.currentColor.hex=this.convertRgbToHex(this.currentColor.rgb),this.currentColor.hsv=this.convertRgbToHsv(this.currentColor.rgb),this.currentColor.percent=this.convertHsvToPercent(this.currentColor.hsv))},setAlpha:function(t){!1!==(t=this.validateAlpha(t))&&(this.currentColor.alpha=t/100,this.currentColor.percent.alphaCursor.x=t)},validatePercent:function(t){if(t.hasOwnProperty("colorCursor")){if(t.colorCursor.hasOwnProperty("x")&&t.colorCursor.hasOwnProperty("y")){if(!this.isInt(t.colorCursor.x)&&!this.isFloat(t.colorCursor.x)||!this.isInt(t.colorCursor.y)&&!this.isFloat(t.colorCursor.y))return!1;t.colorCursor.x<0&&(t.colorCursor.x=0),t.colorCursor.y<0&&(t.colorCursor.y=0),t.colorCursor.x>100&&(t.colorCursor.x=100),t.colorCursor.y>100&&(t.colorCursor.y=100)}}else if(!t.hasOwnProperty("toneCursor"))return!1;if(t.hasOwnProperty("toneCursor")&&t.toneCursor.hasOwnProperty("x")){if(!this.isInt(t.toneCursor.x)&&!this.isFloat(t.toneCursor.x))return!1;if(t.toneCursor.x=parseInt(t.toneCursor.x),isNaN(t.toneCursor.x))return!1;t.toneCursor.x<0&&(t.toneCursor.x=0),t.toneCursor.x>100&&(t.toneCursor.x=100)}return t},validateHsv:function(t){return!!(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v"))&&(t.h=parseInt(t.h),t.s=parseInt(t.s),t.v=parseInt(t.v),!(isNaN(t.h)||isNaN(t.s)||isNaN(t.v))&&(t.h<0&&(t.h=0),t.s<0&&(t.s=0),t.v<=0&&(t.v=0,t.s=0),t.h>=360&&(t.h=0),t.s>100&&(t.g=100),t.v>100&&(t.v=100),t))},validateRgb:function(t){return!!(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b"))&&(t.r=parseInt(t.r),t.g=parseInt(t.g),t.b=parseInt(t.b),!(isNaN(t.r)||isNaN(t.g)||isNaN(t.b))&&(t.r<0&&(t.r=0),t.g<0&&(t.g=0),t.b<0&&(t.b=0),t.r>255&&(t.r=255),t.g>255&&(t.g=255),t.b>255&&(t.b=255),t))},validateRgbPercentage:function(t){return!!(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b"))&&(t.r=parseInt(t.r),t.g=parseInt(t.g),t.b=parseInt(t.b),!(isNaN(t.r)||isNaN(t.g)||isNaN(t.b))&&(t.r<0&&(t.r=0),t.g<0&&(t.g=0),t.b<0&&(t.b=0),t.r>100&&(t.r=100),t.g>100&&(t.g=100),t.b>100&&(t.b=100),t))},validateHex:function(t){return!((t=t.replace(/[^0-9a-fA-F]/g,"").substr(0,6)).length<3)&&t},validateCmyk:function(t){return!!(t.hasOwnProperty("c")&&t.hasOwnProperty("m")&&t.hasOwnProperty("y")&&t.hasOwnProperty("k"))&&(!(!this.isInt(t.c)&&!this.isFloat(t.c)||!this.isInt(t.m)&&!this.isFloat(t.m)||!this.isInt(t.y)&&!this.isFloat(t.y)||!this.isInt(t.k)&&!this.isFloat(t.k))&&(t.c<0&&(t.c=0),t.m<0&&(t.m=0),t.y<0&&(t.y=0),t.k<0&&(t.k=0),t.c>100&&(t.c=100),t.m>100&&(t.m=100),t.y>100&&(t.y=100),t.k>100&&(t.k=100),t))},validateAlpha:function(t){return(!this.isInt(t)||!this.isFloat(t))&&(t<0&&(t=0),t>100&&(t=100),t)},convertPercentToHsv:function(t){t.hasOwnProperty("toneCursor")||(t.toneCursor=this.currentColor.percent.toneCursor),t.hasOwnProperty("colorCursor")||(t.colorCursor=this.currentColor.percent.colorCursor);const e={h:360-3.6*t.toneCursor.x,s:t.colorCursor.x,v:100-t.colorCursor.y};return 360===e.h&&(e.h=0),0===e.v&&(e.s=0),e},convertHsvToPercent:function(t){let e=(360-t.h)/3.6;return 100===e&&(e=0),{toneCursor:{x:e},colorCursor:{x:t.s,y:100-t.v},alphaCursor:this.currentColor.percent.alphaCursor}},convertRgbToHex:function(t){const e={r:Math.round(t.r).toString(16),g:Math.round(t.g).toString(16),b:Math.round(t.b).toString(16)};return e.r.length<2&&(e.r="0"+e.r),e.g.length<2&&(e.g="0"+e.g),e.b.length<2&&(e.b="0"+e.b),e.r[0]===e.r[1]&&e.g[0]===e.g[1]&&e.b[0]===e.b[1]&&(e.r=e.r[0],e.g=e.g[0],e.b=e.b[0]),e.r+e.g+e.b},convertHexToRgb:function(t){return 3===t.length?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)}:6===t.length?{r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)}:void 0},convertRgbToRgbPercentage:function(t){return{r:100*t.r/255,g:100*t.g/255,b:100*t.b/255}},convertRgbPercentageToRgb:function(t){return{r:255*t.r/100,g:255*t.g/100,b:255*t.b/100}},convertRgbToHsv:function(t){const e=t.r/255,r=t.g/255,o=t.b/255,n=Math.max(e,r,o),c=Math.min(e,r,o),a=this.currentColor.hsv;return e===r&&r===o||(n===c?a.h=0:n===e&&r>=o?a.h=(r-o)/(n-c)*60:n===e&&r<o?a.h=(r-o)/(n-c)*60+360:n===r?a.h=(o-e)/(n-c)*60+120:n===o&&(a.h=(e-r)/(n-c)*60+240)),a.s=0===n?0:100*(1-c/n),a.v=100*n,a},convertHsvToRgb:function(t){let e={r:0,g:0,b:0},r=Math.round(t.h),o=Math.round(t.s),n=Math.round(t.v),c=(100-o)*n/100,a=r%60/60*(n-c),l=c+a,s=n-a;switch(Math.floor(r/60)%6){case 0:e={r:n,g:l,b:c};break;case 1:e={r:s,g:n,b:c};break;case 2:e={r:c,g:n,b:l};break;case 3:e={r:c,g:s,b:n};break;case 4:e={r:l,g:c,b:n};break;case 5:e={r:n,g:c,b:s}}return e.r*=2.55,e.g*=2.55,e.b*=2.55,e},convertRgbToCmyk:function(t){let e=parseInt((""+t.r).replace(/\s/g,""),10),r=parseInt((""+t.g).replace(/\s/g,""),10),o=parseInt((""+t.b).replace(/\s/g,""),10);if(0===e&&0===r&&0===o)return{c:0,m:0,y:0,k:100};let n,c=1-e/255,a=1-r/255,l=1-o/255;const s=Math.min(c,Math.min(a,l));c=(c-s)/(1-s),a=(a-s)/(1-s),l=(l-s)/(1-s),n=s;const u={c:0,m:0,y:0,k:0};return u.c=Math.round(100*c),u.m=Math.round(100*a),u.y=Math.round(100*l),u.k=Math.round(100*n),u},convertCmykToRgb:function(t){let e=t.c/100,r=t.m/100,o=t.y/100,n=t.k/100;return e*=1-n,r*=1-n,o*=1-n,{r:Math.round(255*(1-e-n)),g:Math.round(255*(1-r-n)),b:Math.round(255*(1-o-n))}},isInt:function(t){return Number(t)===t&&t%1==0},isFloat:function(t){return Number(t)===t&&t%1!=0}};let touchIntent=!1,wrapper=document.getElementById("wrapper"),colorPicker=document.getElementById("colorPicker"),tonePicker=document.getElementById("tonePicker"),alphaPicker=document.getElementById("alphaPicker"),toneColor=document.getElementById("toneColor"),transparentGradientColorStart=document.getElementById("transparentGradientColorStart"),transparentGradientColorEnd=document.getElementById("transparentGradientColorEnd"),rectColor=document.getElementById("rectColor"),hexInput=document.getElementById("hexInput"),rgbInput=document.getElementById("rgbInput"),rgbPercentageInput=document.getElementById("rgbPercentageInput"),hsvInput=document.getElementById("hsvInput"),cmykInput=document.getElementById("cmykInput"),exampleText=document.getElementById("exampleText"),colorPickerCursor=document.getElementById("colorPickerCursor");tonePickerCursor=document.getElementById("tonePickerCursor"),tonePickerCursorVertical=document.getElementById("tonePickerCursorVertical"),tonePickerCursorHorizontal=document.getElementById("tonePickerCursorHorizontal"),alphaPickerCursor=document.getElementById("alphaPickerCursor"),cursors=document.getElementsByClassName("cursor"),mobileColorModelSelect=document.getElementById("mobileColorModelSelect"),mobileBackground=document.getElementById("mobileBackground");const ui={selectedInput:hexInput,deviceIsSmartphoneOrTablet:!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)),exampleText:"Example text for <b>demonstration</b>",url:window.location.pathname,portraitOrientation:window.matchMedia("(orientation: portrait)").matches};function updateUI(t){rectColor.setAttribute("fill","rgba("+Math.round(palette.currentColor.rgb.r)+", "+Math.round(palette.currentColor.rgb.g)+", "+Math.round(palette.currentColor.rgb.b)+", "+palette.currentColor.alpha+")");const e=palette.convertHsvToRgb({h:palette.currentColor.hsv.h,s:100,v:100});toneColor.setAttribute("fill","rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"),transparentGradientColorStart.setAttribute("stop-color","rgb("+Math.round(palette.currentColor.rgb.r)+", "+Math.round(palette.currentColor.rgb.g)+", "+Math.round(palette.currentColor.rgb.b)+")"),transparentGradientColorEnd.setAttribute("stop-color","rgb("+Math.round(palette.currentColor.rgb.r)+", "+Math.round(palette.currentColor.rgb.g)+", "+Math.round(palette.currentColor.rgb.b)+")");let r=Math.round(palette.currentColor.rgb.r)+", "+Math.round(palette.currentColor.rgb.g)+", "+Math.round(palette.currentColor.rgb.b),o=Math.round(palette.currentColor.rgbPercentage.r)/100+", "+Math.round(palette.currentColor.rgbPercentage.g)/100+", "+Math.round(palette.currentColor.rgbPercentage.b)/100,n=Math.round(palette.currentColor.hsv.h)+", "+Math.round(palette.currentColor.hsv.s)+", "+Math.round(palette.currentColor.hsv.v),c=Math.round(palette.currentColor.cmyk.c)+", "+Math.round(palette.currentColor.cmyk.m)+", "+Math.round(palette.currentColor.cmyk.y)+", "+Math.round(palette.currentColor.cmyk.k);if(1!==palette.currentColor.alpha){const t=Math.round(100*palette.currentColor.alpha)/100;r+=", "+t,o+=", "+t,n+=", "+t,c+=", "+t}hexInput!==t&&(hexInput.value=palette.currentColor.hex),rgbInput!==t&&(rgbInput.value=r),rgbPercentageInput!==t&&(rgbPercentageInput.value=o),hsvInput!==t&&(hsvInput.value=n),cmykInput!==t&&(cmykInput.value=c),exampleText.innerHTML=ui.exampleText,exampleText.style.color="rgba("+Math.round(palette.currentColor.rgb.r)+", "+Math.round(palette.currentColor.rgb.g)+", "+Math.round(palette.currentColor.rgb.b)+", "+palette.currentColor.alpha+")",colorPickerCursor.setAttribute("transform","translate("+palette.currentColor.percent.colorCursor.x*colorPicker.clientWidth/100+", "+palette.currentColor.percent.colorCursor.y*colorPicker.clientHeight/100+")"),palette.currentColor.hsv.s<35&&palette.currentColor.hsv.v>65||palette.currentColor.hsv.v>80&&palette.currentColor.hsv.h>43&&palette.currentColor.hsv.h<190?colorPickerCursor.setAttribute("stroke","#404040"):colorPickerCursor.setAttribute("stroke","#fff"),ui.portraitOrientation?tonePickerCursor.setAttribute("transform","translate("+palette.currentColor.percent.toneCursor.x*tonePicker.clientWidth/100+", 0)"):tonePickerCursor.setAttribute("transform","translate(0, "+palette.currentColor.percent.toneCursor.x*tonePicker.clientHeight/100+")"),palette.currentColor.hsv.h>43&&palette.currentColor.hsv.h<190?(tonePickerCursorVertical.setAttribute("stroke","#404040"),tonePickerCursorHorizontal.setAttribute("stroke","#404040")):(tonePickerCursorVertical.setAttribute("stroke","#f5f5f5"),tonePickerCursorHorizontal.setAttribute("stroke","#f5f5f5")),alphaPickerCursor.setAttribute("transform","translate("+(palette.currentColor.percent.alphaCursor.x*alphaPicker.clientWidth/100-4)+", 0)"),palette.currentColor.hsv.s<50&&palette.currentColor.hsv.v>50||palette.currentColor.percent.alphaCursor.x<50||palette.currentColor.hsv.v>80&&palette.currentColor.hsv.h>43&&palette.currentColor.hsv.h<190?alphaPickerCursor.setAttribute("stroke","#404040"):alphaPickerCursor.setAttribute("stroke","#f5f5f5"),mobileBackground.style.fill="#"+palette.currentColor.hex,mobileBackground.style.opacity=palette.currentColor.alpha}function colorChoosingActionStart(t,e){wrapper.classList.add("non-select"),colorPickerCursor.classList.add("scale-out-anim"),palette.setColorFromPercent({colorCursor:{x:100*(t-colorPicker.offsetLeft)/colorPicker.clientWidth,y:100*(e-colorPicker.offsetTop)/colorPicker.clientHeight}}),touchIntent="color",updateUI()}function toneChoosingActionStart(t){wrapper.classList.add("non-select"),tonePickerCursor.classList.add("scale-out-anim");let e=100*(t.y-tonePicker.offsetTop)/tonePicker.clientHeight;ui.portraitOrientation&&(e=100*(t.x-tonePicker.offsetLeft)/tonePicker.clientWidth),palette.setColorFromPercent({toneCursor:{x:e}}),touchIntent="tone",updateUI()}function alphaChoosingActionStart(t){wrapper.classList.add("non-select"),alphaPickerCursor.classList.add("scale-out-anim"),palette.setAlpha(100*(t-alphaPicker.offsetLeft)/alphaPicker.clientWidth),touchIntent="alpha",updateUI()}function actionsHandler(t){switch(touchIntent){case"color":palette.setColorFromPercent({colorCursor:{x:100*(t.x-colorPicker.offsetLeft)/colorPicker.clientWidth,y:100*(t.y-colorPicker.offsetTop)/colorPicker.clientHeight}}),updateUI();break;case"tone":let e=100*(t.y-tonePicker.offsetTop)/tonePicker.clientHeight;ui.portraitOrientation&&(e=100*(t.x-tonePicker.offsetLeft)/tonePicker.clientWidth),palette.setColorFromPercent({toneCursor:{x:e}}),updateUI();break;case"alpha":palette.setAlpha(100*(t.x-alphaPicker.offsetLeft)/alphaPicker.clientWidth),updateUI()}}function changeUrl(){let t="";1!==palette.currentColor.alpha&&(t="&alpha="+Math.round(100*palette.currentColor.alpha)/100),window.history.pushState(null,"#"+palette.currentColor.hex,ui.url+"?hex="+palette.currentColor.hex+t),localStorage.setItem("currentHue",palette.currentColor.hsv.h),localStorage.setItem("currentHex",palette.currentColor.hex),localStorage.setItem("currentPercent",JSON.stringify(palette.currentColor.percent))}function actionsEnd(){"color"!==touchIntent&&"tone"!==touchIntent&&"alpha"!==touchIntent||(ui.deviceIsSmartphoneOrTablet&&ui.selectedInput.select(),tonePickerCursor.classList.remove("scale-out-anim"),colorPickerCursor.classList.remove("scale-out-anim"),alphaPickerCursor.classList.remove("scale-out-anim"),changeUrl()),touchIntent=!1,wrapper.classList.remove("non-select")}function toSelectInput(t){switch(ui.selectedInput.classList.remove("selected"),ui.selectedInput=t,t.classList.add("selected"),localStorage.setItem("selectedInputId",t.id),mobileColorModelSelect.classList.remove("percentage"),t){case hexInput:mobileColorModelSelect.value="HEX";break;case rgbInput:mobileColorModelSelect.value="RGB";break;case rgbPercentageInput:mobileColorModelSelect.value="RGB %",mobileColorModelSelect.classList.add("percentage");break;case hsvInput:mobileColorModelSelect.value="HSV";break;case cmykInput:mobileColorModelSelect.value="CMYK";break;default:mobileColorModelSelect.value=":)"}}if(colorPicker.addEventListener("mousedown",function(t){colorChoosingActionStart(t.pageX,t.pageY)}),colorPicker.addEventListener("touchstart",function(t){if(t.targetTouches.length>0){const e=t.targetTouches[0];colorChoosingActionStart(e.pageX,e.pageY)}}),tonePicker.addEventListener("mousedown",function(t){toneChoosingActionStart({x:t.pageX,y:t.pageY})}),tonePicker.addEventListener("touchstart",function(t){if(t.targetTouches.length>0){const e=t.targetTouches[0];toneChoosingActionStart({x:e.pageX,y:e.pageY})}}),alphaPicker.addEventListener("mousedown",function(t){alphaChoosingActionStart(t.pageX)}),alphaPicker.addEventListener("touchstart",function(t){if(t.targetTouches.length>0){alphaChoosingActionStart(t.targetTouches[0].pageX)}}),document.addEventListener("touchmove",function(t){if(t.targetTouches.length>0){const e=t.targetTouches[0];actionsHandler({x:e.pageX,y:e.pageY})}}),document.addEventListener("mousemove",function(t){actionsHandler({x:t.pageX,y:t.pageY})}),document.addEventListener("mouseup",function(){actionsEnd()}),document.addEventListener("touchend",function(){actionsEnd()}),hexInput.addEventListener("input",function(){const t=hexInput.value.replace(/[^0-9a-fA-F]/g,"").substr(0,6);palette.setColorFromHex(t),updateUI(hexInput),changeUrl()}),rgbInput.addEventListener("input",function(){let t=rgbInput.value.replace(/,/g," ").replace(/[^0-9. ]/g,"").replace(/ +/g," ").trim();const e={r:palette.currentColor.rgb.r,g:palette.currentColor.rgb.g,b:palette.currentColor.rgb.b},r=t.split(" ");r.length>=3&&(e.r=1*r[0],e.g=1*r[1],e.b=1*r[2],r.length>3?palette.setAlpha(100*r[3]):palette.setAlpha(100),palette.setColorFromRgb(e)),updateUI(rgbInput),changeUrl()}),rgbPercentageInput.addEventListener("input",function(){let t=rgbPercentageInput.value.replace(/,/g," ").replace(/[^0-9. ]/g,"").replace(/ +/g," ").trim();const e={r:palette.currentColor.rgbPercentage.r,g:palette.currentColor.rgbPercentage.g,b:palette.currentColor.rgbPercentage.b},r=t.split(" ");r.length>=3&&(e.r=100*r[0],e.g=100*r[1],e.b=100*r[2],r.length>3?palette.setAlpha(100*r[3]):palette.setAlpha(100),palette.setColorFromRgbPercentage(e)),updateUI(rgbPercentageInput),changeUrl()}),hsvInput.addEventListener("input",function(){const t=hsvInput.value.replace(/,/g," ").replace(/ +/g," ").replace(/ +/g," ").trim(),e={h:palette.currentColor.hsv.h,s:palette.currentColor.hsv.s,v:palette.currentColor.hsv.v},r=t.split(" ");r.length>=3&&(e.h=1*r[0],e.s=1*r[1],e.v=1*r[2],r.length>3?palette.setAlpha(100*r[3]):palette.setAlpha(100),palette.setColorFromHsv(e)),updateUI(hsvInput),changeUrl()}),cmykInput.addEventListener("input",function(){const t=cmykInput.value.replace(/,/g," ").replace(/[^0-9., ]/g,"").replace(/ +/g," ").trim(),e={c:palette.currentColor.hsv.c,m:palette.currentColor.hsv.m,y:palette.currentColor.hsv.y,k:palette.currentColor.hsv.k},r=t.split(" ");r.length>=4&&(e.c=1*r[0],e.m=1*r[1],e.y=1*r[2],e.k=1*r[3],r.length>4?palette.setAlpha(100*r[4]):palette.setAlpha(100),palette.setColorFromCmyk(e)),updateUI(cmykInput),changeUrl()}),null!==localStorage.getItem("selectedInputId")){const t=document.getElementById(localStorage.getItem("selectedInputId"));null!==t&&toSelectInput(t)}function recoveryColorFromUrl(){const t=getJsonFromUrl();return t.hasOwnProperty("hex")&&(palette.setColorFromHex(t.hex),0===palette.currentColor.hsv.s&&(palette.currentColor.hsv.h=localStorage.getItem("currentHue"),palette.setColorFromHsv(palette.currentColor.hsv)),t.hex===localStorage.getItem("currentHex")&&(palette.currentColor.percent=JSON.parse(localStorage.getItem("currentPercent")))),t.hasOwnProperty("alpha")&&palette.setAlpha(100*t.alpha),updateUI(),!0}function getJsonFromUrl(){const t=location.search.substr(1);let e=[];return t.split("&").forEach(function(t){const r=t.split("=");e[r[0]]=decodeURIComponent(r[1])}),e}hsvInput.addEventListener("focus",function(){toSelectInput(this)}),hexInput.addEventListener("focus",function(){toSelectInput(this)}),rgbInput.addEventListener("focus",function(){toSelectInput(this)}),rgbPercentageInput.addEventListener("focus",function(){toSelectInput(this)}),cmykInput.addEventListener("focus",function(){toSelectInput(this)}),recoveryColorFromUrl()&&Array.prototype.filter.call(cursors,function(t){t.style.opacity="1",t.style.transition="all 0.1s linear 0s"}),window.addEventListener("resize",function(){ui.portraitOrientation=window.matchMedia("(orientation: portrait)").matches,updateUI()}),mobileColorModelSelect.addEventListener("input",function(){switch(this.value){case"HEX":toSelectInput(hexInput);break;case"RGB":toSelectInput(rgbInput);break;case"RGB %":toSelectInput(rgbPercentageInput);break;case"HSV":toSelectInput(hsvInput);break;case"CMYK":toSelectInput(cmykInput);break;default:toSelectInput(hexInput)}}),turnNightMode=(()=>{document.body.style.transitionDuration="0s",nightModeSwitcher.classList.add("night"),document.body.classList.add("night"),document.body.style.transitionDuration="0.1s"}),turnLightMode=(()=>{document.body.style.transitionDuration="0s",nightModeSwitcher.classList.remove("night"),document.body.classList.remove("night"),document.body.style.transitionDuration="0.1s"});const nightModeSwitcher=document.getElementById("night-mode-switcher");function nightModeSwitch(){nightModeSwitcher.classList.contains("night")?(turnLightMode(),localStorage.setItem("night-mode","off")):(turnNightMode(),localStorage.setItem("night-mode","on"))}getDefaultTheme=(()=>{const t=localStorage.getItem("journalbook_theme");return null!==t?t:window.matchMedia("(prefers-color-scheme: dark)").matches?(console.log("Dark theme enabled."),"dark"):(console.log("Bright theme enabled."),"")}),autoThemeApply=(()=>{const t=getDefaultTheme();t!==localStorage.getItem("user-desktop-theme")?(localStorage.setItem("user-desktop-theme",t),"dark"===t?(localStorage.setItem("night-mode","on"),turnNightMode()):(localStorage.setItem("night-mode","off"),turnLightMode())):"on"===localStorage.getItem("night-mode")&&(localStorage.setItem("night-mode","on"),turnNightMode())}),autoThemeApply(),window.onfocus=autoThemeApply;